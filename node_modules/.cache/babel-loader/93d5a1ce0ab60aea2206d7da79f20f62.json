{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jony8\\\\OneDrive\\\\Escritorio\\\\react-peliculas\\\\src\\\\peliculas\\\\CrearPeliculas.tsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Cargando from \"utils/Cargando\";\nimport { urlPeliculas } from \"utils/endpoints\";\nimport { convertirPeliculaAFormData } from \"utils/FormDataUtils\";\nimport MostrarErrores from \"utils/MostarErrores\";\nimport FormularioPeliculas from \"./FormularioPeliculas\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function CrearPeliculas() {\n  _s();\n\n  const [generosNoSeleccionados, setGenerosNoSeleccionados] = useState([]);\n  const [cinesNoSeleccionados, setCinesNoSeleccionados] = useState([]);\n  const [cargado, setCargado] = useState(false);\n  const history = useHistory();\n  const [errores, setErrores] = useState([]);\n  useEffect(() => {\n    axios.get(`${urlPeliculas}`).then(respuesta => {\n      setGenerosNoSeleccionados(respuesta.data.generos);\n      setCinesNoSeleccionados(respuesta.data.cines);\n      setCargado(true);\n    });\n  }, []);\n\n  async function crearPelicula(pelicula) {\n    try {\n      const formData = convertirPeliculaAFormData(pelicula);\n      await axios({\n        method: 'post',\n        url: urlPeliculas,\n        data: formData,\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(respuesta => {\n        history.push(`/peliculas/${respuesta.data}`);\n      });\n    } catch (error) {\n      setErrores(error.response.data);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Crear Pel\\xEDcula\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MostrarErrores, {\n      errores: errores\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), cargado ? /*#__PURE__*/_jsxDEV(FormularioPeliculas, {\n      actoresSeleccionados: [],\n      cinesNoSeleccionados: cinesNoSeleccionados,\n      cinesSeleccionados: [],\n      generosNoSeleccionados: generosNoSeleccionados,\n      generosSeleccionados: [],\n      modelo: {\n        titulo: '',\n        enCines: false,\n        trailer: '',\n        resumen: ''\n      },\n      onSubmit: async valores => crearPelicula(valores)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 25\n    }, this) : /*#__PURE__*/_jsxDEV(Cargando, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 18\n    }, this)]\n  }, void 0, true);\n}\n\n_s(CrearPeliculas, \"+NSFbS7ty+OAzwYGorb1woArlBM=\", false, function () {\n  return [useHistory];\n});\n\n_c = CrearPeliculas;\n\nvar _c;\n\n$RefreshReg$(_c, \"CrearPeliculas\");","map":{"version":3,"sources":["C:/Users/jony8/OneDrive/Escritorio/react-peliculas/src/peliculas/CrearPeliculas.tsx"],"names":["axios","useEffect","useState","useHistory","Cargando","urlPeliculas","convertirPeliculaAFormData","MostrarErrores","FormularioPeliculas","CrearPeliculas","generosNoSeleccionados","setGenerosNoSeleccionados","cinesNoSeleccionados","setCinesNoSeleccionados","cargado","setCargado","history","errores","setErrores","get","then","respuesta","data","generos","cines","crearPelicula","pelicula","formData","method","url","headers","push","error","response","titulo","enCines","trailer","resumen","valores"],"mappings":";;;AAAA,OAAOA,KAAP,MAAqC,OAArC;AAGA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,SAASC,YAAT,QAA6B,iBAA7B;AACA,SAASC,0BAAT,QAA2C,qBAA3C;AACA,OAAOC,cAAP,MAA2B,qBAA3B;AACA,OAAOC,mBAAP,MAAgC,uBAAhC;;;AAGA,eAAe,SAASC,cAAT,GAA0B;AAAA;;AAErC,QAAM,CAACC,sBAAD,EAAyBC,yBAAzB,IAAsDT,QAAQ,CAAc,EAAd,CAApE;AACA,QAAM,CAACU,oBAAD,EAAuBC,uBAAvB,IAAkDX,QAAQ,CAAY,EAAZ,CAAhE;AACA,QAAM,CAACY,OAAD,EAAUC,UAAV,IAAwBb,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAMc,OAAO,GAAGb,UAAU,EAA1B;AACA,QAAM,CAACc,OAAD,EAAUC,UAAV,IAAwBhB,QAAQ,CAAW,EAAX,CAAtC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACZD,IAAAA,KAAK,CAACmB,GAAN,CAAW,GAAEd,YAAa,EAA1B,EACCe,IADD,CACOC,SAAD,IAAmD;AACrDV,MAAAA,yBAAyB,CAACU,SAAS,CAACC,IAAV,CAAeC,OAAhB,CAAzB;AACAV,MAAAA,uBAAuB,CAACQ,SAAS,CAACC,IAAV,CAAeE,KAAhB,CAAvB;AACAT,MAAAA,UAAU,CAAC,IAAD,CAAV;AACH,KALD;AAMH,GAPQ,EAON,EAPM,CAAT;;AASA,iBAAeU,aAAf,CAA6BC,QAA7B,EAA4D;AACxD,QAAG;AACC,YAAMC,QAAQ,GAAGrB,0BAA0B,CAACoB,QAAD,CAA3C;AACA,YAAM1B,KAAK,CAAC;AACR4B,QAAAA,MAAM,EAAE,MADA;AAERC,QAAAA,GAAG,EAAExB,YAFG;AAGRiB,QAAAA,IAAI,EAAEK,QAHE;AAIRG,QAAAA,OAAO,EAAE;AAAC,0BAAgB;AAAjB;AAJD,OAAD,CAAL,CAKHV,IALG,CAKGC,SAAD,IAAsC;AAC1CL,QAAAA,OAAO,CAACe,IAAR,CAAc,cAAaV,SAAS,CAACC,IAAK,EAA1C;AACH,OAPK,CAAN;AASH,KAXD,CAYA,OAAOU,KAAP,EAAa;AACTd,MAAAA,UAAU,CAACc,KAAK,CAACC,QAAN,CAAeX,IAAhB,CAAV;AACH;AACJ;;AAED,sBACI;AAAA,4BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI,QAAC,cAAD;AAAgB,MAAA,OAAO,EAAEL;AAAzB;AAAA;AAAA;AAAA;AAAA,YAFJ,EAGKH,OAAO,gBAAI,QAAC,mBAAD;AACZ,MAAA,oBAAoB,EAAE,EADV;AAEZ,MAAA,oBAAoB,EAAEF,oBAFV;AAGZ,MAAA,kBAAkB,EAAE,EAHR;AAIZ,MAAA,sBAAsB,EAAEF,sBAJZ;AAKZ,MAAA,oBAAoB,EAAE,EALV;AAMR,MAAA,MAAM,EAAE;AAAEwB,QAAAA,MAAM,EAAE,EAAV;AAAcC,QAAAA,OAAO,EAAE,KAAvB;AAA8BC,QAAAA,OAAO,EAAE,EAAvC;AAA2CC,QAAAA,OAAO,EAAC;AAAnD,OANA;AAOR,MAAA,QAAQ,EAAE,MAAMC,OAAN,IAAiBb,aAAa,CAACa,OAAD;AAPhC;AAAA;AAAA;AAAA;AAAA,YAAJ,gBAQH,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA,YAXT;AAAA,kBADJ;AAgBH;;GAnDuB7B,c;UAKJN,U;;;KALIM,c","sourcesContent":["import axios, { AxiosResponse } from \"axios\";\nimport { cineDTO } from \"cines/cines.model\";\nimport { generoDTO } from \"generos/generos.model\";\nimport { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Cargando from \"utils/Cargando\";\nimport { urlPeliculas } from \"utils/endpoints\";\nimport { convertirPeliculaAFormData } from \"utils/FormDataUtils\";\nimport MostrarErrores from \"utils/MostarErrores\";\nimport FormularioPeliculas from \"./FormularioPeliculas\";\nimport { peliculaCreacionDTO, peliculasPostGetDTO } from \"./peliculas.model\";\n\nexport default function CrearPeliculas() {\n\n    const [generosNoSeleccionados, setGenerosNoSeleccionados] = useState<generoDTO[]>([]);\n    const [cinesNoSeleccionados, setCinesNoSeleccionados] = useState<cineDTO[]>([]);\n    const [cargado, setCargado] = useState(false);\n    const history = useHistory();\n    const [errores, setErrores] = useState<string[]>([]);\n\n    useEffect(() => {\n        axios.get(`${urlPeliculas}`)\n        .then((respuesta: AxiosResponse<peliculasPostGetDTO>) => {\n            setGenerosNoSeleccionados(respuesta.data.generos);\n            setCinesNoSeleccionados(respuesta.data.cines);\n            setCargado(true)\n        })\n    }, [])\n\n    async function crearPelicula(pelicula: peliculaCreacionDTO) {\n        try{\n            const formData = convertirPeliculaAFormData(pelicula);\n            await axios({\n                method: 'post',\n                url: urlPeliculas,\n                data: formData,\n                headers: {'Content-Type': 'multipart/form-data'}\n            }).then((respuesta: AxiosResponse<number>) => {\n                history.push(`/peliculas/${respuesta.data}`);\n            });\n            \n        }\n        catch (error){\n            setErrores(error.response.data)\n        }\n    }\n\n    return (\n        <>\n            <h3>Crear Pel√≠cula</h3>\n            <MostrarErrores errores={errores} />\n            {cargado ?  <FormularioPeliculas\n            actoresSeleccionados={[]}\n            cinesNoSeleccionados={cinesNoSeleccionados}\n            cinesSeleccionados={[]}\n            generosNoSeleccionados={generosNoSeleccionados}\n            generosSeleccionados={[]}\n                modelo={{ titulo: '', enCines: false, trailer: '', resumen:'' }}\n                onSubmit={async valores => crearPelicula(valores)}\n            /> : <Cargando />}\n            \n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}