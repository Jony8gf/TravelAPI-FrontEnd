{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jony8\\\\OneDrive\\\\Escritorio\\\\react-peliculas\\\\src\\\\utils\\\\IndiceEntidad.tsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Button from \"./Button\";\nimport confirmar from \"./Confirmar\";\nimport ListadoGenerico from \"./ListadoGenerico\";\nimport Paginacion from \"./Paginacion\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function IndiceEntidad(props) {\n  _s();\n\n  const [entidades, setEntidades] = useState();\n  const [totalDePaginas, setTotalDePaginas] = useState(0);\n  const [recordsPorPagina, setRecordsPorPagina] = useState(10);\n  const [pagina, setPagina] = useState(1);\n  useEffect(() => {\n    cargarDatos();\n  }, [pagina, recordsPorPagina]);\n\n  function cargarDatos() {\n    axios.get(props.url, {\n      params: {\n        pagina,\n        recordsPorPagina\n      }\n    }).then(respuesta => {\n      const totalDeRegistros = parseInt(respuesta.headers['cantidadtotalregistros'], 10);\n      setTotalDePaginas(Math.ceil(totalDeRegistros / recordsPorPagina));\n      setEntidades(respuesta.data);\n    });\n  }\n\n  async function borrar(id) {\n    try {\n      await axios.delete(props.url + \"/\" + id);\n      cargarDatos();\n    } catch (error) {\n      console.log(error.response.data);\n    }\n  }\n\n  const botones = (urlEditar, id) => /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      className: \"btn btn-success mx-2\",\n      to: urlEditar,\n      children: \"Editar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: () => confirmar(() => borrar(id)),\n      className: \"btn btn-danger mx-2\",\n      children: \"Borrar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: props.titulo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      className: \"btn btn-primary\",\n      to: props.urlCrear,\n      children: [\"Crear \", props.titulo]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      className: \"form-control\",\n      onChange: e => {\n        setPagina(1);\n        setRecordsPorPagina(Number(e.currentTarget.value));\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: 5,\n        children: \"5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: 10,\n        children: \"10\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: 25,\n        children: \"25\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: 50,\n        children: \"50\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Paginacion, {\n      paginaActual: pagina,\n      onChange: nuevaPagina => setPagina(nuevaPagina),\n      cantidadTotalDePaginas: totalDePaginas\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ListadoGenerico, {\n      listado: entidades,\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"table table-striped\",\n        children: props.children(entidades, botones)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(IndiceEntidad, \"nrwrdIgvOZjkK3es+GjaS3KooTs=\");\n\n_c = IndiceEntidad;\n\nvar _c;\n\n$RefreshReg$(_c, \"IndiceEntidad\");","map":{"version":3,"sources":["C:/Users/jony8/OneDrive/Escritorio/react-peliculas/src/utils/IndiceEntidad.tsx"],"names":["axios","useEffect","useState","Link","Button","confirmar","ListadoGenerico","Paginacion","IndiceEntidad","props","entidades","setEntidades","totalDePaginas","setTotalDePaginas","recordsPorPagina","setRecordsPorPagina","pagina","setPagina","cargarDatos","get","url","params","then","respuesta","totalDeRegistros","parseInt","headers","Math","ceil","data","borrar","id","delete","error","console","log","response","botones","urlEditar","titulo","urlCrear","e","Number","currentTarget","value","nuevaPagina","children"],"mappings":"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","sourcesContent":["import axios, { AxiosResponse } from \"axios\";\r\nimport { ReactElement, useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Button from \"./Button\";\r\nimport confirmar from \"./Confirmar\";\r\nimport ListadoGenerico from \"./ListadoGenerico\";\r\nimport Paginacion from \"./Paginacion\";\r\n\r\nexport default function IndiceEntidad<T>(props: indiceEntidadProps<T>) {\r\n\r\n    const [entidades, setEntidades] = useState<T[]>();\r\n    const [totalDePaginas, setTotalDePaginas] = useState(0);\r\n    const [recordsPorPagina, setRecordsPorPagina] = useState(10);\r\n    const [pagina, setPagina] = useState(1);\r\n\r\n\r\n    useEffect(() => {\r\n        cargarDatos();\r\n    }, [pagina, recordsPorPagina])\r\n\r\n    function cargarDatos() {\r\n        axios.get(props.url, {\r\n            params: { pagina, recordsPorPagina }\r\n        })\r\n            .then((respuesta: AxiosResponse<T[]>) => {\r\n                const totalDeRegistros =\r\n                    parseInt(respuesta.headers['cantidadtotalregistros'], 10);\r\n                setTotalDePaginas(Math.ceil(totalDeRegistros / recordsPorPagina))\r\n                setEntidades(respuesta.data);\r\n            })\r\n    }\r\n\r\n    async function borrar(id: number) {\r\n        try {\r\n            await axios.delete(props.url + \"/\" + id);\r\n            cargarDatos();\r\n        } catch (error) {\r\n            console.log(error.response.data)\r\n        }\r\n    }\r\n\r\n    const botones = (urlEditar: string, id: number) => <>\r\n        <Link className=\"btn btn-success mx-2\" to={urlEditar}>Editar</Link>\r\n        <Button\r\n            onClick={() => confirmar(() => borrar(id))}\r\n            className=\"btn btn-danger mx-2\"\r\n        >Borrar</Button>\r\n    </>\r\n\r\n    return (\r\n\r\n        <>\r\n            <h3>{props.titulo}</h3>\r\n            <Link className=\"btn btn-primary\" to={props.urlCrear}>Crear {props.titulo}</Link>\r\n\r\n            <select\r\n                className=\"form-control\"\r\n                onChange={e => {\r\n                    setPagina(1);\r\n                    setRecordsPorPagina(Number(e.currentTarget.value))\r\n                }\r\n                }>\r\n                <option value={5}>5</option>\r\n                <option value={10}>10</option>\r\n                <option value={25}>25</option>\r\n                <option value={50}>50</option>\r\n            </select>\r\n\r\n            <Paginacion\r\n                paginaActual={pagina}\r\n                onChange={nuevaPagina => setPagina(nuevaPagina)}\r\n                cantidadTotalDePaginas={totalDePaginas}\r\n            ></Paginacion>\r\n\r\n            <ListadoGenerico listado={entidades}>\r\n                <table className=\"table table-striped\">\r\n                    {props.children(entidades!, botones)}\r\n                </table>\r\n            </ListadoGenerico>\r\n        </>\r\n\r\n\r\n    )\r\n}\r\n\r\ninterface indiceEntidadProps<T> {\r\n    url: string;\r\n    urlCrear?: string;\r\n    children(entidades: T[],\r\n        botones: (urlEditar: string, id: number) => ReactElement): ReactElement;\r\n    titulo: string;\r\n    nombreEntidad?: string;\r\n}"]},"metadata":{},"sourceType":"module"}